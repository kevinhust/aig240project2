#!/usr/bin/expect -f
set password "123"
set host "192.168.64.4"
set user "jetauto"
set timeout 1200

set cmd {
cd ~/jetauto_ws && \
rm -rf build devel logs .catkin_tools && \
/bin/bash -c "source /opt/ros/melodic/setup.bash && catkin_make"
}

spawn ssh -t -o StrictHostKeyChecking=no $user@$host $cmd
expect {
    "password:" {
        send "$password\r"
        exp_continue
    }
    eof
}
